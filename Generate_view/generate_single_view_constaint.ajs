/*
 * JArchi script that generates a view called "selected elements" that contains all the Archimate concepts selected in the model.
 *
 * Requires:
 *     Archi:			https://www.archimatetool.com
 *     jArchi plugin:	https://www.archimatetool.com/plugins
 *     Java script:		generate_view.js
 *
 *  #	date		Author			Comments
 *  1	28/01/2019	Herv√© Jouin		File creation.
 */

console.show();
console.clear();
console.log("Executing " + __FILE__.substring(6) + " ...");

try {
	load(__DIR__ + "generate_view/generate_view.js");

	var view = generate_view({
		verbose: true,
		// selection: "selected" or "*"
		selection: "selected",
		// concepts: "business-actor,application-component,constraint", // no spaces!
		// concepts: "constraint,grouping",
		// concepts: "business-function,business-object", // no spaces!
		concepts: "constraint,grouping", // no spaces!
		graphDepth: 2,
		viewName: "gen-constraint",

		// action: TYPE_ACTION.ONE_VIEW_PER_CONCEPT,
		action: TYPE_ACTION.ONE_SINGLE_VIEW,
		// Direction for rank nodes. Can be TB, BT, LR, or RL, where T = top, B = bottom, L = left, and R = right.
		// BottomTop, LeftRight, ... "BT", "LR", "RL"
		graphDirection: "LR",

		// UpLeft, DownRight "UL", "UR", "DL", "DR"
		graphAlign: "UL",
		// nested_relations: ["aggregation-relationship"],
		// nested_relations: ["assignment-relationship","aggregation-relationship"],
		// nested_relations: ["specialization-relationship"],
		// nested_relations: ["specialization-relationship","composition-relationship","aggregation-relationship", "access-relationship"],
		// nested_relations: ["specialization-relationship","aggregation-relationship"],
		// algorithm: "longest-path",
		// algorithm: "tight-tree",
		algorithm: "network-simplex",
		hSep: 20,
		vSep: 50,
		debug: false
	});

	if (view !== undefined) {
		console.log("The view \"" + view.name + "\" has been generated.");
		open_view(view);
	} else {
		console.error("The view has not been generated.");
	}
} catch (e) {
	console.error("Error : " + e);
	if (e.stack !== undefined)
		console.error(e.stack);
}

console.log("End.");