
Hier vind je de Archi scripts die worden gebruikt bij maken en onderhouden van het [GEMMA ArchiMate-modellen](https://github.com/VNG-Realisatie/GEMMA-Archi-repository) en de VNGR projectarchitecturen (zoals de projectarchitectuur [omgevingswet](https://github.com/VNG-Realisatie/Omgevingswet-Archi-repository)).

Zie de pagina [Archi scripting](https://redactie.gemmaonline.nl/index.php/Archi_scripting) voor een handleiding installeren van de jArchi plugin.

Hoe de scripts gebruikt moeten worden, is (meestal) bovenin het script beschreven. Kijk hieronder voor welke scripts er zijn en wat deze doen. De tabel is niet uitputtend, opgesomd worden de meest gebruikte scripts:
| Folder  | Scripts  |
|--|---|
|_lib | Door de scripts gebruikte generieke functies. Naast enkele node javascript libraries vind je hier: <ul><li>**common.js**: generieke functies voor logging en debugging</li><li>**selection.js**: generieke functies voor het selecteren van objecten in de model tree of in een view</li></ul>Modules hebben de extensie `.js` en zijn niet zichtbaar in  Archi. Een uitvoerbaar Archi script heeft de extensie `.ajs`
| root folder | Veel gebruikte scripts, geplaatst in de root om met minder klikken te kunnen draaien <ul><li>**addProperty**: Voeg een property met inhoud/waarde toe aan de geselecteerde concepten</li><li>**copyFormat**: Selecteer in een view een object en draai dit script. Alle objecten op de view hebben nu dezelfde opmaak</li><li>**mergeElement**: Maak van meerdere elementen met dezelfde naam en van hetzelfde Archimate-type één element. Alle relaties, view-occurences en properties worden overgezet en blijven dus bewaard </li><li>**mergeRelation**: Idem, maar nu voor relaties</li><li>**removeBendpoints**: Selecteer een view of relaties op een view en verwijder alle bendpoints</li><li>**reverseRelation**: Selecteer één of meerdere relaties en keer de richting van de relaties om</li></ul> |
| Appearance  | Scripts voor het opmaken van views (selecteer een view of objecten in en view) <ul><li>**toggleFigure**: Toggle de figure van objecten in een view</li><li>**colorByProperty**: Wijzig de kleur van objecten op basis van de waarde van een te kiezen property</li><li>**setDefaultFormat**: Reset het uiterlijk van objecten op views naar de jouw Archi settings</li></ul> |
| Beheren | Scripts voor het in bulk vinden of bewerken van objecten <ul><li> **createProjectmodel**: save a copy of the reference model and keep only the for the project relevant objects</li><li> **deleteUnusedElements**: Verwijderd alle concepten die niet op een view voorkomen</li><li>**deleteEmptyFolders**: Verwijderd in een geselecteerde model of folder de lege folders </li><li>**findDuplicateRelations**: Toont een lijst met id's van dubbele relaties in de console</li><li>**find_Id_or_Name_InModels**: Zoek op Object ID, id of naam in geopende modellen in de model tree</li></ul> |
| Convert to | Scripts voor het wijzigen van het ArchiMate-type van een concept (bijvoorbeeld een Application Function naar een Application Service). <br>Vanaf versie 5.1 van Archi is dit een standaard functie (rechts klikken op object > set concept type).<br>Extra functie van het script: meer logging en tijdens het omzetten ongeldige relatietypen worden na afloop waar mogelijk teruggezet naar het oorspronkelijke relatietype
| Develop | Scripts nuttig voor het ontwikkelen van scripts <ul><li>**plotID**: Toon in de view de Archi-id's van de objecten</li><li>**plotColorCode**: Toon in de view de color codes van de objecten</li></ul> |
| GEMMA  | Scripts specifiek voor het beheer van het GEMMA ArchiMate-model of afgeleide modellen <ul><li>**setObjectID**: Controleer of er geen dubbele Object ID's zijn. Geef alle elementen, relaties en views in een model een uniek Object ID</li><li>**createReleaseModel**: Maak een tijdelijk gefilterd model als bron voor het exporteren van een AMEFF bestand.  <ul><li>setObjectID, zie hierboven</li><li>filter: verwijder views zonder `publiceren=GEMMA online`, verwijder ongebruikte elementen en lege folders </li><li> Set model property `release=<today>`</li></ul></li><li>**plotObjectID**: Toon in de view de Object ID's van de objecten</li><li>**plotBetrouwbaarheidSom**: Script voor view Betrouwbaarheidscriteria, toont de BIV-waarden en kleurt de objecten met de som van deze waarden</li></ul>De folder **used_once** bevat scripts voor een eenmalige bulk acties. Eén van deze scripts is **change_AF2AS**, gebruikt voor het doorvoeren van een GEMMA kennismodel wijziging in het GEMMA ArchiMate-model |
| GGM| Scripts voor het importeren en exporteren van de GGM CSV bestanden. Op de redactieomgeving van GEMMA online is de [koppeling met GGM](https://redactie.gemmaonline.nl/index.php/Koppeling_met_GGM) gedocumenteerd
| ImportExport_CSV  | Scripts voor het exporteren en weer importeren van elementen, relaties en views met alle hun properties. <ul><li> **export_element**: exporteer van de geselecteerde folder, view of set van objecten alle elementen naar een csv-bestand</li><li> **export_relation**: idem, maar nu voor relaties</li><li> **export_view**: idem, maar nu voor views</li><li>**import**: Gewijzigde properties worden bijgewerkt, properties met de waarde `<remove>` worden verwijderd</li></ul>Archi maakt het gebruik van het import script veilig. Als de import niet doet wat je wilt kun je met een simpele Ctrl-z alles weer ongedaan maken.<br>Tip: gebruik voor het bewerken van de CSV's bij voorkeur LibreOffice Calc en niet Excel (reden is de default gebruikte characterset) |
|Report| Genereren van een rapport gedefinieerd in een view. Gebaseerd op het script van  [Richard Heward - Tame Blue Lion Ltd](https://www.tamebluelion.co.uk/archimate-documentation) <ul><li>**exportImage**: Genereer een markdown tekst met view en tabel van de getoonde elementen van de geselecteerde view(s)</li><li>**generate_report**: Genereer een markdown rapport zoals gedefinieerd in een 'driving view'</li></ul> |
| Sync from CSV | Importeren van CSV bestanden. Uit het CSV bestand kunnen meerdere objecttypen en relaties worden aangemaakt en bijgewerkt.|
| View | Genereren van views met een directed layout. Het gedrag is configureerbaar en is gedocumenteerd in de [readme.md](Scripts/View/readme.md).<br><br>Scripts en het default gedrag:<ul><li>**_generate**: Genereer een view van de geselecteerde elementen. Als je één element selecteerd, wordt een view gegenereerd met dit element én alle gerelateerde elementen</li><li>**_generate_multiple**: Genereer voor ieder geselecteerd element een view</li><li>**_layout_LR** en **_layout_TB**: Selecteer een view en maak een layout van Links_naar_Recht of van Top_to_Bottom</li><li>**_layout_nested_LR** en **_layout_nested_TB**: Selecteer een view en maak een layout met nesting van Links_naar_Recht of van Top_to_Bottom. Default worden aggregation-relations genest</li><li>**_expand**: Selecteer één of meerdere elementen op een view. In de view worden van de geselecteerde elementen de gerelateerde elementen toegevoegd</li></ul> Nesting is beperkt ondersteund en geeft soms fouten.|

## Licentie
De scripts zijn vrij beschikbaar onder de Europese Union Public Licence (EUPL). Dit betekent dat u de scripts vrij kunt gebruiken, aanpassen en verspreiden, zolang u de oorspronkelijke auteurs vermeldt en eventuele wijzigingen onder dezelfde licentie deelt.

## Ondersteuning
De scripts worden zonder enige vorm van garantie of ondersteuning beschikbaar gesteld. We kunnen geen hulp bieden bij installatie, configuratie of het oplossen van problemen die zich kunnen voordoen bij het gebruik van deze scripts. Het gebruik ervan is geheel op eigen risico en verantwoordelijkheid. 